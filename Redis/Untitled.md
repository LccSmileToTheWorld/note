### 缓存雪崩：

缓存同一时间大面积失效，或缓存服务器宕机/重启，或第一次启动服务时没有将数据加载到缓存中，导致大量请求直接访问数据库，造成数据库崩掉。

解决方案：

* 缓存数据设置随机过期时间，防止同一时间大量数据过期。
* 缓存预热，提前将热点数据加载到缓存中，再提供服务。
* 互斥锁。

### 缓存穿透：

数据在缓存和数据库中都没有，导致大量请求直接访问数据库，造成数据库崩掉。

解决方案：

* 接口层限制，如 id<=0 直接拦截。
* 从缓存中，数据库中都取不到时，可以将key-value对写成key-null，缓存失效时间可以设置为短点（设置太长时间会导致正常情况也无法使用）。这样可以防止用户使用同一个id暴力攻击。
* 采用布隆过滤器，将所有可能的数据放到一个足够大的bitmap中，一个一定不会存在的数据就会被bitmap拦截掉。

### 缓存击穿：

一条热点数据过期，过多并发用户读缓存没有读到，有同时去访问数据库，导致数据库压力过大。和缓存雪崩不同的是，缓存击穿是指并发查询同一条数据。雪崩是指很多数据都查不到，从而查数据库。

解决方案：

* 设置热点数据永不过期。
* 互斥锁。